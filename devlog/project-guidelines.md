# 才藝老師管理系統 - 項目規範

*文檔創建日期: 2023-05-26*  
*最後更新日期: 2023-03-15*

## 1. 代碼規範

### 1.1 命名規範
- **數據庫表名稱**: 統一使用大寫（例如：TEACHERS, COURSES, SCHEDULES）
- **變量命名**: 使用駝峰式命名法（camelCase）
- **組件命名**: 使用帕斯卡命名法（PascalCase）
- **文件命名**: 使用短橫線命名法（kebab-case）
- **常量命名**: 使用全大寫加下劃線（UPPER_SNAKE_CASE）
- **前端項目目錄**: 使用`web`命名
- **後端項目目錄**: 使用`server`命名

### 1.2 註釋規範
- **所有代碼必須有中英文註釋**，確保團隊成員和未來維護者能夠理解
- 函數和方法必須有註釋說明其功能、參數和返回值
- 複雜邏輯必須有詳細註釋解釋實現原理
- 註釋格式示例：
  ```javascript
  /**
   * 計算兩個數字的和 Calculate the sum of two numbers
   * @param {Number} a - 第一個數字 First number
   * @param {Number} b - 第二個數字 Second number
   * @returns {Number} 兩數之和 Sum of the two numbers
   */
  function add(a, b) {
    return a + b;
  }
  ```

### 1.3 開發日誌規範
- **更新開發日誌前必須先詢問目前日期**，確保使用正確的日期記錄開發進度
- 每日開發日誌必須記錄已完成項目、進行中項目和下一步計劃
- 開發日誌必須保留歷史記錄，不得隨意刪除舊記錄
- 重要決策和問題解決方案必須詳細記錄

### 1.4 代碼結構規範
- **樣式與腳本分離**：CSS/SCSS 文件與 JavaScript/TypeScript 文件分開管理
- **組件使用單獨目錄**：每個組件應有自己的目錄，包含組件文件、樣式、測試等
- 每個組件應遵循單一職責原則
- 業務邏輯與 UI 邏輯分離
- 使用模塊化設計，避免過大的文件

### 1.5 代碼修改與問題排查規範
- **針對性修改**：修改代碼時只針對問題點進行修改，非相關代碼不要更動
- **全面分析**：在查找問題時，先查看所有相關代碼，全面了解問題上下文
- **最小化影響**：修改應盡量減少對其他功能的影響
- **保持一致性**：修改後的代碼風格應與原有代碼保持一致
- **記錄修改**：重要修改需在開發日誌中記錄修改原因和內容

## 2. 前端開發規範

### 2.1 Vue 開發規範
- 使用 Vue 3 Composition API 進行開發
- 組件結構統一為：`<template>`, `<script setup>`, `<style>` 順序
- 使用 TypeScript 進行類型定義
- 樣式使用 SCSS 並採用 scoped 屬性
- 組件目錄結構遵循功能模塊化

### 2.2 UI 設計風格
- **採用現代化蘋果設計風格**，注重簡潔、優雅和易用性
- 遵循以下蘋果設計原則：
  - **簡約性**：界面簡潔，減少視覺雜訊
  - **直接操作**：提供直觀的交互方式
  - **一致性**：保持整個應用的視覺和交互一致
  - **深度**：適當使用陰影和層次感
  - **清晰度**：文字清晰易讀，控件明確
- 使用蘋果風格的設計元素：
  - 半透明毛玻璃效果（Frosted Glass）
  - 圓角矩形設計
  - 輕微陰影和漸變
  - 簡潔的圖標設計
  - 適當的留白
- 色彩方案應清新、明亮，避免過於鮮艷的顏色
- 動畫效果要流暢自然，避免過度使用

### 2.3 樣式規範
- 使用 Tailwind CSS 作為基礎樣式框架
- 自定義樣式使用 SCSS 並遵循 BEM 命名規範
- 顏色、字體大小等使用變量管理，避免硬編碼
- 響應式設計必須覆蓋移動端、平板和桌面設備
- 定義統一的設計令牌（Design Tokens）：
  - 顏色系統
  - 字體系統
  - 間距系統
  - 陰影系統
  - 圓角系統

### 2.4 資源管理
- 圖片資源統一放在 assets/images 目錄下
- 圖標優先使用 SVG 格式
- 靜態資源使用 CDN 加速
- 大型資源需進行懶加載處理

### 2.5 數據請求與緩存
- **前端實現數據緩存**，避免重複請求相同數據
- 只有在數據更新時才重新請求
- 使用 Pinia 或 Vuex 進行狀態管理和緩存
- 實現緩存失效機制，確保數據最終一致性
- API URL 不使用硬編碼，統一使用配置文件管理

### 2.6 前端開發規範
- **所有前端頁面必須考慮移動端的響應式佈局**，確保在不同設備上都能正常顯示
- 使用 SCSS 進行樣式開發，並遵循變量和混合器的使用規範
- 組件開發必須遵循單一職責原則，一個組件只負責一個功能
- 頁面結構、樣式和邏輯必須分離，便於維護和擴展

## 3. 後端開發規範

### 3.1 API 設計規範
- 遵循 RESTful API 設計原則
- API 路徑使用小寫和短橫線分隔
- 返回統一的 JSON 格式，包含狀態碼、消息和數據
- API 版本控制使用 URL 路徑方式（例如：/api/v1/teachers）
- URL 不使用硬編碼，統一使用配置文件管理
- **後端API服務器運行在3004端口**，避免與其他服務衝突

### 3.2 數據庫規範
- **表名統一使用大寫**
- 主鍵命名為 id
- 創建和更新時間字段必須包含（createdAt, updatedAt）
- 使用軟刪除而非硬刪除（使用 isDeleted 字段）
- 關聯字段命名規則：關聯表名_id（例如：TEACHER_ID）
- **數據庫初始化設定為有數據時不清除**

### 3.3 安全規範
- 所有 API 請求必須進行身份驗證和授權
- 敏感數據必須加密存儲
- 防止 SQL 注入、XSS 和 CSRF 攻擊
- API 限流和防止暴力破解

## 4. 版本控制規範

### 4.1 Git 提交規範
- 提交訊息必須使用中英文，清晰描述變更內容
- 提交訊息格式：`[類型] 中文描述 (English description)`
- 類型包括：`feat`（新功能）、`fix`（修復）、`docs`（文檔）、`style`（樣式）、`refactor`（重構）、`test`（測試）、`chore`（構建/工具）
- 示例：`[feat] 添加用戶登入功能 (Add user login feature)`

### 4.2 分支管理
- `main`: 主分支，保持穩定可發布狀態
- `develop`: 開發分支，所有功能開發完成後合併到此分支
- `feature/xxx`: 功能分支，用於開發新功能
- `bugfix/xxx`: 修復分支，用於修復問題
- `release/xxx`: 發布分支，用於準備發布

## 5. 測試規範

### 5.1 測試要求
- 單元測試覆蓋率不低於 80%
- 核心功能必須有集成測試
- 前端組件必須有快照測試
- 關鍵流程必須有端到端測試

### 5.2 測試工具
- 單元測試：Jest
- 組件測試：Vue Test Utils
- 端到端測試：Cypress
- API 測試：Supertest

## 6. 部署規範

### 6.1 環境配置
- 開發環境：`dev`
- 測試環境：`test`
- 預發布環境：`staging`
- 生產環境：`prod`

### 6.2 Docker 部署
- 所有環境統一使用 Docker 容器部署
- 使用 Docker Compose 管理多容器應用
- 當代碼更新時，必須重新構建容器

## 7. 文檔規範

### 7.1 API 文檔
- 使用 Swagger 生成 API 文檔
- 所有 API 必須有詳細的參數說明和返回值說明
- API 文檔必須與代碼同步更新

### 7.2 開發文檔
- 項目架構文檔
- 開發環境搭建文檔
- 部署文檔
- 常見問題解決方案文檔

## 8. 協作規範

### 8.1 溝通渠道
- 日常溝通使用 Slack/Discord
- 任務管理使用 Jira/Trello
- 文檔協作使用 Notion/Confluence
- 代碼審查通過 GitHub Pull Request 進行

### 8.2 會議規範
- 每日站會不超過 15 分鐘
- 每週進行一次進度回顧會議
- 每個迭代結束進行一次回顧會議
- 重大技術決策必須有會議記錄

## 9. 如何使用本規範

### 9.1 開發人員
- 在開始開發前，閱讀並理解本規範
- 在開發過程中，隨時參考本規範確保遵循標準
- 當有疑問時，以本規範為準
- 提出改進建議，幫助完善規範

### 9.2 AI 助手使用方式
- 在每次對話開始時，可提醒 AI 助手："請按照 project-guidelines.md 中的規則進行開發"
- 可以具體提到某條規則："請記住數據庫表名統一大寫，註釋要中英文"
- 當要求 AI 助手完成特定任務時，可提醒相關的規則
- 如果 AI 助手的回答或代碼不符合規則，請指出具體問題
- 可以為常用規則創建簡稱或代號，方便快速引用

---

本規範文檔將隨著項目的進展不斷完善和調整。所有團隊成員都有責任遵循這些規範，並提出改進建議。 